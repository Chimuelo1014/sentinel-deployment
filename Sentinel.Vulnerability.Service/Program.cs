using Sentinel.Vulnerability.Service.Publishers;
using Sentinel.Vulnerability.Service.Services;

var builder = WebApplication.CreateBuilder(args);


builder.Services.AddSingleton<IResultReader, VolumeFileReader>();
builder.Services.AddScoped<TrivyMapper>();
builder.Services.AddScoped<ZapMapper>();
builder.Services.AddSingleton<ResultAggregator>();
builder.Services.AddSingleton<IReportPublisher, ReportPublisher>();

builder.Services.AddControllers();
builder.Services.AddLogging();

var app = builder.Build();
app.MapControllers();
app.Run();