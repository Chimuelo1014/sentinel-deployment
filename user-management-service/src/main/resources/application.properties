spring.application.name=user-management-service
# ===================================
# APPLICATION
# ===================================
server.port=8083

# ===================================
# DATABASE
# ===================================
spring.datasource.url=jdbc:postgresql://localhost:5432/sentinel_user_mgmt
spring.datasource.username=postgres
spring.datasource.password=Qwe.123*
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# ===================================
# RABBITMQ
# ===================================
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest


# Feign Clients
services.auth.url=http://auth-service:8081
services.tenant.url=http://tenant-service:8082
services.project.url=http://project-service:8083
feign.client.config.default.connectTimeout=5000
feign.client.config.default.readTimeout=5000


# User Management Events
user_mgmt.events.exchange=user-mgmt-exchange
user_mgmt.events.user-invited-routing-key=user.invited
user_mgmt.events.invitation-accepted-routing-key=user.invitation.accepted
user_mgmt.events.access-revoked-routing-key=user.access.revoked

# ===================================
# MICROSERVICES
# ===================================


# ===================================
# INVITATIONS
# ===================================
invitation.expiration.days=7
invitation.base.url=http://localhost:3000/invitations/accept

# ===================================
# MAIL
# ===================================
spring.mail.host=localhost
spring.mail.port=1025
spring.mail.username=
spring.mail.password=
spring.mail.properties.mail.smtp.auth=false
spring.mail.properties.mail.smtp.starttls.enable=false

# ===================================
# LOGGING
# ===================================
logging.level.root=INFO
logging.level.com.sentinel.user_management=DEBUG
logging.level.org.springframework.amqp=DEBUG
logging.level.org.hibernate.SQL=DEBUG

# Logging pattern
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Log file
logging.file.name=logs/user-management-service.log
logging.file.max-size=10MB
logging.file.max-history=10

# ===================================
# RESILIENCE4J - CIRCUIT BREAKER
# ===================================
resilience4j.circuitbreaker.instances.tenantService.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.tenantService.slidingWindowSize=10
resilience4j.circuitbreaker.instances.tenantService.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.tenantService.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.tenantService.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.tenantService.waitDurationInOpenState=10s
resilience4j.circuitbreaker.instances.tenantService.failureRateThreshold=50

resilience4j.circuitbreaker.instances.projectService.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.projectService.slidingWindowSize=8
resilience4j.circuitbreaker.instances.projectService.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.projectService.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.projectService.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.projectService.waitDurationInOpenState=10s
resilience4j.circuitbreaker.instances.projectService.failureRateThreshold=50

# ===================================
# RESILIENCE4J - RETRY
# ===================================
resilience4j.retry.instances.tenantService.maxAttempts=3
resilience4j.retry.instances.tenantService.waitDuration=1s
resilience4j.retry.instances.tenantService.enableExponentialBackoff=true
resilience4j.retry.instances.tenantService.exponentialBackoffMultiplier=2

resilience4j.retry.instances.projectService.maxAttempts=2
resilience4j.retry.instances.projectService.waitDuration=1s
resilience4j.retry.instances.projectService.enableExponentialBackoff=true
resilience4j.retry.instances.projectService.exponentialBackoffMultiplier=2


# Actuator
management.endpoints.web.exposure.include=health,info,circuitbreakers
management.endpoint.health.show-details=always
management.health.circuitbreakers.enabled=true



# Billing Service
services.billing.url=http://billing-service:8084
# Circuit Breaker
resilience4j.circuitbreaker.instances.billingService.failureRateThreshold=50
resilience4j.circuitbreaker.instances.billingService.waitDurationInOpenState=10000
resilience4j.circuitbreaker.instances.billingService.slidingWindowSize=10
# Retry
resilience4j.retry.instances.billingService.maxAttempts=3
resilience4j.retry.instances.billingService.waitDuration=1000
2592000000

# JWT CONFIGURATION
jwt.secret=X9q2N8ZCnO3Tj48p1Fk6B2V0x8Teq9gHBV0SX1e2p6U=
jwt.expiration=3600000
jwt.refresh.expiration=2592000000
